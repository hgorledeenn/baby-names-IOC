geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme_minimal()
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme_minimal(
axis.title.x = element_text(color = "blue", size = 14, face = "bold", angle=45),
)
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme(
axis.title.x = element_text(color = "blue", size = 14, face = "bold", angle=45),
)
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme_minimal()
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme_minimal(
axis.text.x = element_text(color = "blue", size = 14, face = "bold")
)
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme_minimal(
axis.text.x = element_text(color = "blue", size = 14, face = "bold")
)
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme(
axis.text.x = element_text(color = "blue", size = 14, face = "bold")
)
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme(
axis.text.x = element_text(color = "blue", size = 14, face = "bold", angle=45)
)
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme(
axis.text.x = element_text(color = "blue", size = 14, face = "bold", angle=90)
)
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme(
axis.text.x = element_text(color = "blue", size = 14, face = "bold", angle=270)
)
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme(
axis.text.x = element_text(size = 10, face = "bold", angle=270)
)
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=total_count) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme(
axis.text.x = element_text(size = 10, angle=270)
)
df_only_mandf <- df_wider %>%
filter(FEMALE>0 & MALE>0) %>%
mutate(pct_diff = (FEMALE-MALE)/(FEMALE+MALE)) %>%
mutate(total_count = FEMALE+MALE) %>%
mutate(diff_size = abs(FEMALE-MALE)) %>%
arrange(desc(pct_diff))
df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=diff_size) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65)
) +
theme(
axis.text.x = element_text(size = 10, angle=270)
)
View(df)
library(tidyverse)
df = read_csv("~/Desktop/CJS/0126algorithms/HW-in-one-chart-1/BABY NAMES/Popular_Baby_Names_20260203.csv")
df_no_yrs <- df %>%
mutate(name = str_to_title(`Child's First Name`)) %>%
group_by(Gender, name) %>%
summarize(sum_count = sum(Count))
df <- df %>%
mutate(name = str_to_title(`Child's First Name`))
View(df)
df_no_ethn <- df %>%
group_by(`Year of Birth`, Gender, name)
View(df_no_ethn)
df_no_ethn <- df %>%
group_by(`Year of Birth`, Gender, name) %>%
summarize(sum_count = sum(Count))
df_no_ethn <- df %>%
group_by(`Year of Birth`, Gender, name) %>%
summarize(sum_count = sum(Count)) %>%
pivot_wider(names_from = Gender, values_from = sum_count, values_fill = 0)
library(tidyverse)
df = read_csv("~/Desktop/CJS/0126algorithms/HW-in-one-chart-1/BABY NAMES/Popular_Baby_Names_20260203.csv")
df <- df %>%
mutate(name = str_to_title(`Child's First Name`))
df_no_ethn <- df %>%
group_by(`Year of Birth`, Gender, name) %>%
summarize(sum_count = sum(Count)) %>%
pivot_wider(names_from = Gender, values_from = sum_count, values_fill = 0)
df_no_yrs <- df %>%
mutate(name = str_to_title(`Child's First Name`)) %>%
group_by(Gender, name) %>%
summarize(sum_count = sum(Count))
df_wider <- df_no_yrs %>%
pivot_wider(names_from = Gender, values_from = sum_count, values_fill = 0)
df_only_mandf <- df_wider %>%
filter(FEMALE>0 & MALE>0) %>%
mutate(pct_diff = (FEMALE-MALE)/(FEMALE+MALE)) %>%
mutate(total_count = FEMALE+MALE) %>%
mutate(diff_size = abs(FEMALE-MALE)) %>%
arrange(desc(pct_diff))
vertical_cols <- df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=diff_size) +
geom_col() +
labs(
title="% Difference in occurrences of names between females and males",
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65),
x = "Names",
y = "Percent difference in occurrences of name by gender",
fill = str_wrap("Total Name Count", width=15)
) +
theme(
axis.text.x = element_text(size = 10, angle=270)
)
horizontal_bars <- df_only_mandf %>%
ggplot() +
aes(x=reorder(name, -pct_diff), y=pct_diff, fill=diff_size) +
geom_bar(stat="identity") +
coord_flip() +
labs(
title = str_wrap("% Difference in occurrences of names between females and males", width=65),
subtitle = str_wrap("Positive values show a name is more common among women, negative show a name is more common among men.", width=65),
x = "Names",
y = "Percent difference in occurrences of name by gender",
fill = str_wrap("Total Name Count", width=15)
) +
theme(
axis.text.y = element_text(size = 10, angle=0)
)
df_only_mandf
ggsave("column_chart_1.png",
plot = vertical_cols,
width = 8,
height = 6,
units = "in",
dpi = 300)
ggsave("bar_chart_1.png",
plot = horizontal_bars,
width = 7,
height = 8,
units = "in",
dpi = 300)
mutate(mutate(pct_diff = (FEMALE-MALE)/(FEMALE+MALE))
df_no_ethn <- df %>%
library(tidyverse)
df = read_csv("~/Desktop/CJS/0126algorithms/HW-in-one-chart-1/BABY NAMES/Popular_Baby_Names_20260203.csv")
df <- df %>%
mutate(name = str_to_title(`Child's First Name`))
df_no_ethn <- df %>%
group_by(`Year of Birth`, Gender, name) %>%
summarize(sum_count = sum(Count)) %>%
pivot_wider(names_from = Gender, values_from = sum_count, values_fill = 0)
View(df_no_ethn)
df_no_ethn <- df %>%
group_by(`Year of Birth`, Gender, name) %>%
summarize(sum_count = sum(Count)) %>%
pivot_wider(names_from = Gender, values_from = sum_count, values_fill = 0) %>%
mutate(pct_diff = (FEMALE-MALE)/(FEMALE+MALE))
df_no_ethn_diff_byyear <- df_no_ethn %>%
pivot_wider(names_from = `Year of Birth`, values_from = pct_diff)
View(df_no_ethn_diff_byyear)
df_no_ethn_diff_byyear <- df_no_ethn %>%
pivot_wider(names_from = `Year of Birth`, values_from = pct_diff) %>%
select(-FEMALE, -MALE)
View(df_no_ethn_diff_byyear)
df_no_ethn_diff_byyear %>%
ggplot()
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff)
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff) +
geom_line()
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff) +
geom_line(stat="name")
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff) +
geom_line(stat="identity")
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, color=name) +
geom_line()
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, color=name) +
geom_line
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, color=name) +
geom_line()
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line()
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, group=name, color=name) +
geom_line()
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line()
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(alpha=0.1)
df_no_ethn <- df %>%
group_by(`Year of Birth`, Gender, name) %>%
summarize(sum_count = sum(Count)) %>%
pivot_wider(names_from = Gender, values_from = sum_count, values_fill = 0) %>%
mutate(pct_diff = (FEMALE-MALE)/(FEMALE+MALE)) %>%
mutate(total_count = (FEMALE+MALE))
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, group=name, color=total_count) +
geom_line(alpha=0.1)
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, group=name, color=total_count) +
geom_line(alpha=0.5)
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, group=name, color=total_count) +
geom_line(alpha=total_count)
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, group=name, alpha=total_count) +
geom_line()
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, group=name, alpha=total_count) +
geom_line()
df = read_csv("~/Desktop/CJS/0126algorithms/HW-in-one-chart-1/BABY NAMES/Popular_Baby_Names_20260203.csv")
library(tidyverse)
df = read_csv("~/Desktop/CJS/0126algorithms/HW-in-one-chart-1/BABY NAMES/Popular_Baby_Names_20260203.csv")
df <- df %>%
mutate(name = str_to_title(`Child's First Name`))
df_no_ethn <- df %>%
group_by(`Year of Birth`, Gender, name) %>%
summarize(sum_count = sum(Count)) %>%
pivot_wider(names_from = Gender, values_from = sum_count, values_fill = 0) %>%
mutate(pct_diff = (FEMALE-MALE)/(FEMALE+MALE)) %>%
mutate(total_count = (FEMALE+MALE))
df_no_ethn_diff_byyear <- df_no_ethn %>%
pivot_wider(names_from = `Year of Birth`, values_from = pct_diff) %>%
select(-FEMALE, -MALE)
df_no_ethn %>%
ggplot() +
aes(x=`Year of Birth`, y=pct_diff, group=name, alpha=total_count) +
geom_line()
View(df)
View(df_no_ethn)
View(df)
View(df_no_ethn_diff_byyear)
library(tidyverse)
library(glue)
library(ggplot)
library(ggrepel)
library(gganimate)
setwd("~/Desktop/CJS/0126algorithms/HW-in-one-chart-1/BABY NAMES")
df = read_csv("~/Desktop/CJS/0126algorithms/HW-in-one-chart-1/BABY NAMES/Popular_Baby_Names_20260203.csv")
df <- df %>%
mutate(name = str_to_title(`Child's First Name`))
df_no_ethn <- df %>%
group_by(`Year of Birth`, Gender, name) %>%
summarize(sum_count = sum(Count)) %>%
pivot_wider(names_from = Gender, values_from = sum_count, values_fill = 0) %>%
mutate(pct_diff = (FEMALE-MALE)/(FEMALE+MALE)) %>%
mutate(total_count = (FEMALE+MALE))
wide_with_var <- df_no_ethn %>%
select(name, `Year of Birth`, pct_diff) %>%
pivot_wider(
names_from = `Year of Birth`,
values_from = pct_diff
) %>%
rowwise() %>%
mutate(
variance = var(c_across(`2011`:`2021`), na.rm = TRUE)
) %>%
ungroup() %>%
select(name, variance, `2011`:`2021`)
wide_with_var <- wide_with_var %>%
mutate(sum_pct_diff = rowSums(wide_with_var[c("2011","2012","2013","2014","2015","2016","2017","2018","2019","2020","2021")], na.rm=TRUE))
wide_with_var <- wide_with_var %>%
filter(name %in% variance_list) %>%
arrange(
desc(sum_pct_diff),   # highest total_pct_diff first
desc(variance),         # break ties by variance
name                    # break any remaining ties alphabetically
) %>%
mutate(
rank = row_number()     # sequential rank
)
only_w_variance <- wide_with_var %>%
filter(variance>0)
variance_list <- only_w_variance$name
df_with_var <- df_no_ethn %>%
filter(name %in% variance_list)
for (i in variance_list) {
title <- paste0("All names with variance>0 in the dataset with ", i, " highlighted")
sum <- sum(df_with_var$total_count[df_with_var$name == i])
var <- sum(wide_with_var$variance[wide_with_var$name == i])
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
subtitle <- paste0("The name ", i, " appeared ", sum, " times in the dataset and had a variance of ", var, ".")
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="black", linewidth=0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
geom_label_repel(data = filter(df_with_var, name==i),
aes(label = paste0(`Year of Birth`, "\nFemale: ", FEMALE, "\nMale: ", MALE)),
fill = "white",
size=2,
alpha=0.9) +
labs(
title = title,
subtitle = str_wrap(subtitle, 60)
)
filename <- paste0("plots/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="grey50", linewidth=0.5) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.25, y = 0.8,
label = i,
color = "grey20", size = 26,
fontface = "bold", alpha=0.6, hjust=0, vjust=1) +
labs(
x = "Year of Birth",
y = "Gender Difference"
) +
transition_time(name) +
ease_aes("linear")
anim_save("trying-animation.gif")
}
View(wide_with_var)
wide_with_var <- wide_with_var %>%
filter(name %in% variance_list) %>%
arrange(
desc(sum_pct_diff),   # highest total_pct_diff first
desc(variance),         # break ties by variance
name                    # break any remaining ties alphabetically
) %>%
mutate(
rank = row_number()     # sequential rank
)
only_w_variance <- wide_with_var %>%
filter(variance>0)
variance_list <- only_w_variance$name
df_with_var <- df_no_ethn %>%
filter(name %in% variance_list)
for (i in variance_list) {
title <- paste0("All names with variance>0 in the dataset with ", i, " highlighted")
sum <- sum(df_with_var$total_count[df_with_var$name == i])
var <- sum(wide_with_var$variance[wide_with_var$name == i])
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
subtitle <- paste0("The name ", i, " appeared ", sum, " times in the dataset and had a variance of ", var, ".")
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="black", linewidth=0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
geom_label_repel(data = filter(df_with_var, name==i),
aes(label = paste0(`Year of Birth`, "\nFemale: ", FEMALE, "\nMale: ", MALE)),
fill = "white",
size=2,
alpha=0.9) +
labs(
title = title,
subtitle = str_wrap(subtitle, 60)
)
filename <- paste0("plots/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="grey50", linewidth=0.5) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.25, y = 0.8,
label = i,
color = "grey20", size = 26,
fontface = "bold", alpha=0.6, hjust=0, vjust=1) +
labs(
x = "Year of Birth",
y = "Gender Difference"
) +
transition_time(name) +
ease_aes("linear")
anim_save("trying-animation.gif")
}
