fontface = "bold", alpha=0.75, hjust=1) +
labs(
title = title,
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
title <- paste0("All names with variance>0 in the dataset with ", i, " highlighted")
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_hline(yintercept = 0, color = "gray20", linewidth = 0.5) +
geom_line(color="black", linewidth=0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "gray33", size = 5,
fontface = "bold", alpha=0.75, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "gray33", size = 5,
fontface = "bold", alpha=0.75, hjust=1) +
labs(
title = title,
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
title <- paste0("All names with variance>0 in the dataset with ", i, " highlighted")
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_hline(yintercept = 0, color = "gray33", linewidth = 0.5) +
geom_line(color="black", linewidth=0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "gray33", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "gray33", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
labs(
title = title,
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
title <- paste0("All names with variance>0 in the dataset with ", i, " highlighted")
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_hline(yintercept = 0, color = "orangered4", linewidth = 0.5) +
geom_line(color="black", linewidth=0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "orangered4", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "orangered4", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
labs(
title = title,
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_hline(yintercept = 0, color = "orangered4", linewidth = 0.5) +
geom_line(color="black", linewidth=0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "orangered4", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "orangered4", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.5, y = -0.8,
label = i,
color = "grey30", size = 12,
fontface = "bold", alpha=0.6, hjust=0) +
labs(
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_hline(yintercept = 0, color = "orangered4", linewidth = 0.5) +
geom_line(color="black", linewidth=0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "orangered4", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "orangered4", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.5, y = -0.8,
label = i,
color = "grey30", size = 25,
fontface = "bold", alpha=0.6, hjust=0) +
labs(
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_hline(yintercept = 0, color = "orangered4", linewidth = 0.5) +
geom_line(color="black", linewidth=0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "orangered4", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "orangered4", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.5, y = -0.8,
label = i,
color = "grey30", size = 25,
fontface = "bold", alpha=0.6, hjust=0, vjust=0) +
labs(
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(color="grey50", linewidth=0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.5, y = -0.8,
label = i,
color = "grey20", size = 25,
fontface = "bold", alpha=0.6, hjust=0, vjust=0) +
labs(
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="grey50", linewidth=0.5) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.5, y = -0.8,
label = i,
color = "grey20", size = 25,
fontface = "bold", alpha=0.6, hjust=0, vjust=0) +
labs(
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="grey50", linewidth=0.5) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.25, y = -0.9,
label = i,
color = "grey20", size = 30,
fontface = "bold", alpha=0.6, hjust=0, vjust=0) +
labs(
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="grey50", linewidth=0.5) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.25, y = -0.9,
label = i,
color = "grey20", size = 26,
fontface = "bold", alpha=0.6, hjust=0, vjust=0) +
labs(
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="grey50", linewidth=0.5) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.25, y = -0.8,
label = i,
color = "grey20", size = 26,
fontface = "bold", alpha=0.6, hjust=0, vjust=0) +
labs(
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="grey50", linewidth=0.5) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.25, y = 0.8,
label = i,
color = "grey20", size = 26,
fontface = "bold", alpha=0.6, hjust=0, vjust=1) +
labs(
x = "Year of Birth",
y = "Gender Difference"
)
filename <- paste0("for_animating/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="grey50", linewidth=0.5) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.25, y = 0.8,
label = i,
color = "grey20", size = 26,
fontface = "bold", alpha=0.6, hjust=0, vjust=1) +
labs(
x = "Year of Birth",
y = "Gender Difference"
) +
transition_time(year) +
ease_aes("linear")
anim_save("trying-animation.gif")
}
install.packages("gganimate")
library(tidyverse)
library(glue)
library(ggrepel)
library(gganimate)
for (i in variance_list) {
title <- paste0("All names with variance>0 in the dataset with ", i, " highlighted")
sum <- sum(df_with_var$total_count[df_with_var$name == i])
var <- sum(wide_with_var$variance[wide_with_var$name == i])
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
subtitle <- paste0("The name ", i, " appeared ", sum, " times in the dataset and had a variance of ", var, ".")
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="black", linewidth=0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
geom_label_repel(data = filter(df_with_var, name==i),
aes(label = paste0(`Year of Birth`, "\nFemale: ", FEMALE, "\nMale: ", MALE)),
fill = "white",
size=2,
alpha=0.9) +
labs(
title = title,
subtitle = str_wrap(subtitle, 60)
)
filename <- paste0("plots/", current_rank, "-", i, ".png")
ggsave(filename, plot=p, width = 6, height = 4, units = "in")
}
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="grey50", linewidth=0.5) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.25, y = 0.8,
label = i,
color = "grey20", size = 26,
fontface = "bold", alpha=0.6, hjust=0, vjust=1) +
labs(
x = "Year of Birth",
y = "Gender Difference"
) +
transition_time(name) +
ease_aes("linear")
anim_save("trying-animation.gif")
}
library(gganimate)
install.packages(gganimate)
install.packages("gganimate")
library(gganimate)
for (i in variance_list) {
current_rank <- wide_with_var %>%
filter(name == i) %>%
pull(rank)
p <- ggplot(data = df_with_var) +
aes(x=`Year of Birth`, y=pct_diff, group=name) +
geom_line(color="grey50", linewidth=0.5) +
geom_hline(yintercept = 0, color = "black", linewidth = 0.5) +
geom_line(data = filter(df_with_var, name==i), color = "red", linewidth=1) +
annotate("text",
x = 2021, y = 0.1,
label = "More Female ↑",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2021, y = -0.1,
label = "More Male ↓",
color = "black", size = 5,
fontface = "bold", alpha=0.9, hjust=1) +
annotate("text",
x = 2011.25, y = 0.8,
label = i,
color = "grey20", size = 26,
fontface = "bold", alpha=0.6, hjust=0, vjust=1) +
labs(
x = "Year of Birth",
y = "Gender Difference"
) +
transition_time(name) +
ease_aes("linear")
anim_save("trying-animation.gif")
}
library(ggplot)
detach("package:ggplot2", unload = TRUE)
detach("package:ggrepel", unload = TRUE)
detach("package:ggplot2", unload = TRUE)
library(gganimate)
library(gganimate)
library(gganimate)
library(ggplot2)
library(tidyverse)
library(glue)
library(ggplot)
